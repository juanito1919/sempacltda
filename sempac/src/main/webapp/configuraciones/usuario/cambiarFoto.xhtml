<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <ui:composition>
        <p:dialog header="Selecionar foto de Perfil" widgetVar="dlg2" modal="true" height="500" width="800" resizable="false">
            <h:form id="formFoto" enctype="multipart/form-data">
                <h:panelGrid border="0"  columns="1" cellspacing="5" style="margin-left: auto;" width="100%">
                    <p:panel>
                        <h:panelGrid columns="2" width="50%">
                            <p:commandButton value="Establecer como foto de perfil"
                                             disabled="#{editorUsuarioFoto.imageTemp==null}"
                                             action="#{editorUsuarioFoto.actionGuardarFoto}"
                                             process="@form"
                                             oncomplete="dlg2.hide();"/>
                            <p:commandButton value="Cancelar"
                                             type="button"
                                             onclick="dlg2.hide();"/>
                        </h:panelGrid>
                    </p:panel>

                    <p:panel styleClass="editorFoto">
                        <p:imageCropper value="#{editorUsuarioFoto.croppeFoto}"
                                        image="/usuario/temp/#{editorUsuarioFoto.imageTemp}"
                                        rendered="#{editorUsuarioFoto.imageTemp!=null}"
                                        initialCoords="225,75,300,125"
                                        minSize="100,150"
                                        maxSize="300,350"
                                        aspectRatio="0.9"/>
                        <p:fileUpload fileUploadListener="#{editorUsuarioFoto.uploadFile}"
                                      rendered="#{editorUsuarioFoto.imageTemp==null}"
                                      mode="advanced"
                                      label="Seleccione Foto (max.500Kb)"
                                      auto="true"
                                      update="formFoto"
                                      sizeLimit="500000"
                                      allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>
                    </p:panel>
                </h:panelGrid>
            </h:form>
        </p:dialog>
    </ui:composition>
</html>

